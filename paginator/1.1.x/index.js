/*!
 * JRaiser 2 Javascript Library
 * paginator - v1.1.0 (2016-02-10T20:08:42+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("paginator/1.1.x/",["dom/1.1.x/","widget/1.1.x/","tmpl/2.1.x/"],function(e,a,t){"use strict";var r=e("widget/1.1.x/"),i=e("tmpl/2.1.x/");return r.create({_init:function(e){var a=this,t=e.wrapper;t&&(t.empty().html(i.render(e.template,{currentPage:e.currentPage,totalPages:e.totalPages,pageItems:a._build(),nextText:e.nextText,prevText:e.prevText,ellipsisText:e.ellipsisText})),t.find("a").click(function(e){e.preventDefault(),a._trigger("click",{page:parseInt(this.getAttribute("data-page"))})}))},_destroy:function(e){e.wrapper&&e.wrapper.empty()},_build:function(){var e=this._options,a=e.totalPages;if(1>a)throw new Error('the value of "totalPages" cannot be less then 1');var t=e.howManyPageItems,r=parseInt((t-1)/2),i=e.currentPage||1,n=[],p=i-r,s=i+r,l=p-1,g=a-s;0>l&&(p=1,s=Math.min(a,s-l)),0>g&&(s=a,l>0&&(p=Math.max(1,p+g))),t%2===0&&(p>1?p--:a>s&&s++),p>1&&p++,a>s&&s--;var o=p-1;o&&(n.push({page:1,current:!1}),o>2?n.push({page:"..."}):n.push({page:p-1,current:!1}));for(var _=p;s>=_;_++)n.push({page:_,current:_==i});return o=a-s,o&&(o>2?n.push({page:"..."}):n.push({page:s+1,current:!1}),n.push({page:a,current:!1})),n}},{currentPage:1,howManyPageItems:7,prevText:"上一页",nextText:"下一页",ellipsisText:"...",template:'<ol class="paginator"><% if (currentPage > 1) { %><li class="paginator__item paginator__item-prev"><a href="#" data-page="<%=(currentPage - 1)%>"><%=prevText%></a></li><% } else { %><li class="paginator__item paginator__item-prev paginator__item--disabled"><span><%=prevText%></span></li><% } %><% pageItems.forEach(function(obj) { %><% if (obj.current) { %><li class="paginator__item paginator__item-number paginator__item--current"><span><%=obj.page%></span></li><% } else if (obj.page === "...") { %><li class="paginator__item paginator__item-ellipsis"><span><%=ellipsisText%></span></li><% } else { %><li class="paginator__item paginator__item-number"><a href="#" data-page="<%=obj.page%>"><%=obj.page%></a></li><% } %><% }); %><% if (currentPage < totalPages) { %><li class="paginator__item paginator__item-next"><a href="#" data-page="<%=(currentPage + 1)%>"><%=nextText%></a></li><% } else { %><li class="paginator__item paginator__item-next paginator__item--disabled"><span><%=nextText%></span></li><% } %></ol>'})});