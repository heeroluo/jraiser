/*!
 * JRaiser 2 Javascript Library
 * scrollbar - v1.0.2 (2014-08-21T10:56:42+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("scrollbar/1.0.x/",["dom/1.0.x/","widget/1.0.x/","uadetector/1.0.x/","draggable/1.0.x/"],function(l,o,r){"use strict";var e,s=(l("base/1.0.x/"),l("dom/1.0.x/")),c=l("widget/1.0.x/"),t=l("draggable/1.0.x/"),a='<div class="scrollbar"><div class="scrollbar-track"><div class="scrollbar-thumb"></div></div></div>';e="onmousewheel"in document.body?"mousewheel":"DOMMouseScroll";var i="webkitOverflowScrolling"in document.body.style;return c.create(function(){},{_init:function(l){var o=l.axis;if(!o)throw new Error("please specify the axis of scrollbar");o=o.toLowerCase();var r=this;if(r._axis=o,r._scrollBody=l.scrollBody,i){r._overflowStyle={webkitOverflowScrolling:"touch"};var c;switch(r._axis){case"x":r._overflowStyle.overflowX="scroll",c="scrollLeft";break;case"y":r._overflowStyle.overflowY="scroll",c="scrollTop"}return r._onOverflowScroll=function(){r.trigger("scroll",{scrollBodyPosition:this[c]})},void r._scrollBody.parent().css(r._overflowStyle).on("scroll",r._onOverflowScroll)}switch(r._scrollOuter=l.scrollOuter,r._scrollbar=s(a).click(function(l){if(l.stopPropagation(),r._scrollbarEnabled&&!s(l.target).hasClass("scrollbar-thumb")){var o;switch(r._axis){case"x":o=(l.offsetX-r._scrollThumb.width()/2)/r._scrollbar.outerWidth()*r._scrollBody.outerWidth(!0);break;case"y":o=(l.offsetY-r._scrollThumb.height()/2)/r._scrollbar.outerHeight()*r._scrollBody.outerHeight(!0)}r.scrollTo(o)}}),o){case"x":r._scrollbar.addClass("scrollbar-horizontal");break;case"y":r._scrollbar.addClass("scrollbar-vertical")}r._scrollThumb=r._scrollbar.find(".scrollbar-thumb"),r._scrollOuter.append(r._scrollbar),l.mouseWheelStep&&(r.onMouseWheel=function(o){var e=o.originalEvent,s=1;e.wheelDelta?e.wheelDelta>0&&(s=-1):e.detail&&e.detail<0&&(s=-1);var c=l.scrollPageWhenEnd&&(!r._scrollbarEnabled||l.scrollPageWhenEnd&&null!=r._scrollBodyPosition&&(-1===s&&r._scrollBodyPosition<=0||1===s&&r._scrollBodyPosition>=r._scrollBodyLimit));c||(r.scroll(s*l.mouseWheelStep),o.preventDefault())},r._scrollOuter.on(e,r.onMouseWheel)),r.refresh()},_destroy:function(){var l=this;delete l._axis,l.onMouseWheel&&(l._scrollOuter.off(e,l.onMouseWheel),delete l.onMouseWheel),l._scrollOuter.removeClass("scrollbar-unscrollable"),delete l._scrollOuter,l._draggable&&(l._draggable.destroy(),delete l._draggable),l._scrollbar&&(l._scrollbar.remove(),delete l._scrollbar);var o=l._scrollBody.parent();if(l._overflowStyle){for(var r in l._overflowStyle)l._overflowStyle[r]="";o.css(l._overflowStyle)}l._onOverflowScroll&&(o.off("scroll",l._onOverflowScroll),delete l._onOverflowScroll),delete l._bodySize,delete l._viewportSize,delete l._scrollbarEnabled,delete l._scrollThumbLimit,delete l._scrollBodyLimit,delete l._scrollBodyPosition,delete l._scrollThumb,delete l._scrollBody},refresh:function(){var l,o,r=this;switch(r._axis){case"x":l=r._scrollBody.outerWidth(!0),o=r._scrollBody.parent().outerWidth();break;case"y":l=r._scrollBody.outerHeight(!0),o=r._scrollBody.parent().outerHeight()}if(r._bodySize=l,r._viewportSize=o,r.trigger("beforerefresh",{viewportSize:o,scrollBodySize:l,scrollbar:r._scrollbar}),l>o){var e,s,c=o/l;switch(r._axis){case"x":e=r._scrollbar.outerWidth(),s=Math.max(c*e,r._options.minThumbSize),r._scrollThumb.width(s),r._scrollThumbLimit=e-s;break;case"y":e=r._scrollbar.outerHeight(),s=Math.max(c*e,r._options.minThumbSize),r._scrollThumb.height(s),r._scrollThumbLimit=e-s}r._scrollBodyLimit=l-o,r._draggable=r._draggable||new t({wrapper:r._scrollThumb,boundary:r._scrollbar.find(".scrollbar-track"),events:{drag:function(l){var o;switch(r._axis){case"x":o=l.position.left;break;case"y":o=l.position.top}r.scrollTo(r._scrollBodyLimit*o/r._scrollThumbLimit)}}}),r._scrollbar.removeClass("scrollbar-disabled"),r._scrollOuter.removeClass("scrollbar-unscrollable"),r._scrollbarEnabled=!0,r.scroll(0)}else r._draggable&&(r._draggable.destroy(),delete r._draggable),r._scrollbar.addClass("scrollbar-disabled"),r._scrollOuter.addClass("scrollbar-unscrollable"),r._scrollbarEnabled=!1,r.scrollTo(0);return r.trigger("afterrefresh",{viewportSize:o,scrollBodySize:l,scrollbar:r._scrollbar,scrollbarEnabled:r._scrollbarEnabled}),r._scrollbarEnabled},viewportSize:function(){return this._viewportSize},bodySize:function(){return this._bodySize},scroll:function(l){var o,r=this;switch(r._axis){case"x":o="left";break;case"y":o="top"}r.scrollTo(-(parseFloat(r._scrollBody.css(o))||0)+l)},scrollTo:function(l){var o=this;if(o._scrollbarEnabled||!(l>0)){0>l?l=0:l>o._scrollBodyLimit&&(l=o._scrollBodyLimit);var r;switch(o._axis){case"x":r="left";break;case"y":r="top"}o._scrollBody.css(r,-l),o._scrollBodyPosition=l;var e=o._scrollBodyLimit?l/o._scrollBodyLimit*o._scrollThumbLimit:0;o._scrollThumb.css(r,e),o.trigger("scroll",{scrollbar:o._scrollbar,scrollBodyPosition:l,scrollThumbPosition:e})}},scrollBodyPosition:function(){return this._scrollBodyPosition}},{axis:"y",minThumbSize:20,mouseWheelStep:100,scrollPageWhenEnd:!1})});