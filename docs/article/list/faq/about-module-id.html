<!DOCTYPE html>
<html lang="zh-hans">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,shrink-to-fit=no" />
<meta name="format-detection" content="telephone=no,email=no" />
<meta name="keywords" content="javascript,jraiser,bowljs,modular,library,cmd,amd,loader,define,require,模块化,加载器" />
<meta name="description" content="基于CMD规范的模块化类库，包含加载器和一些通用性强的基础模块和UI组件。此外还有配套的CLI工具，可用于构建代码和生成API文档。" />
<title>关于模块ID | JRaiser</title>
<link href="/jraiser/style/basic.css?1" media="all" rel="stylesheet" type="text/css" />
<link href="/jraiser/style/common.css?1" media="all" rel="stylesheet" type="text/css" />
</head>

<body>
<!--[if lt IE 9]>
<script>
!function(body) {
	var html = body.parentNode;
	body.style.width = '100%';
	body.style.height = '100%';
	html.style.overflow = body.style.overflow= 'hidden';
}(document.body);
</script>
<iframe src="/4oie.html" frameborder="0" scrolling="no" style="position: absolute; width: 100%; height: 100%; left: 0; top: 0; z-index: 99999;"></iframe>
<![endif]-->
<header class="header">
	<div class="g-boundary g-clearfix">
		<div class="header__logo">
			<a href="/">
				<img src="/jraiser/image/logo.png" alt="JRaiser" />
			</a>
		</div>
		<nav class="header__nav">
			<a href="/jraiser/article/list/beginner/quick-start.html" class="header__nav__item header__nav__item__current">教程</a>
			<a href="/jraiser/api/index.html" target="_blank" class="header__nav__item">API文档</a>
			<a href="https://github.com/heeroluo/jraiser/issues" target="_blank" class="header__nav__item">提交Issue</a>
		</nav>
	</div>
</header>
<div class="p-wrapper g-boundary g-clearfix">
	<div id="main" class="p-main">
		<article class="p-article">
	<h1 class="p-article__title">关于模块ID</h1>
	<div class="p-article__content"><p>在 v2.3.0 之前的版本中，本类库的所有模块入口文件的文件名均为「index-debug.js」、「index.js」。由于 Bowl.js 的ID规则允许省略「index」这一文件名，所以只写目录名就可以调用模块：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'dom/1.1.x/'</span>);</span><br><span class="line"><span class="keyword">var</span> ajax = <span class="built_in">require</span>(<span class="string">'ajax/1.3.x/'</span>);</span><br></pre></td></tr></table></figure>
<p>这样做的问题是，在浏览器开发工具的网络面板中，所有JS模块的文件名都是一样的，很难分辨哪个是哪个。所以，在 v2.3.0 中，增加了新的入口文件，<strong>文件名与目录名一致</strong>，也就是：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'dom/1.1.x/dom'</span>);</span><br><span class="line"><span class="keyword">var</span> ajax = <span class="built_in">require</span>(<span class="string">'ajax/1.3.x/ajax'</span>);</span><br></pre></td></tr></table></figure>
<p>当然，根据 Bowljs 的ID规则，还可以写得更短：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'dom@1.1.x'</span>);</span><br><span class="line"><span class="keyword">var</span> ajax = <span class="built_in">require</span>(<span class="string">'ajax@1.3.x'</span>);</span><br></pre></td></tr></table></figure>
<p>然而，问题还没完全解决。如果出现这样的调用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'dom/1.1.x/'</span>);</span><br><span class="line"><span class="keyword">var</span> $ = <span class="built_in">require</span>(<span class="string">'dom@1.1.x'</span>);</span><br></pre></td></tr></table></figure>
<p>就相当于同一个模块被加载两次。因此，如果项目中同时存在这两种ID，最好在加载器的「map」配置项中将其处理为同一个文件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">bowljs.config(&#123;</span><br><span class="line">    map: [<span class="function"><span class="keyword">function</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (url.pathname.indexOf(<span class="string">'/lib/'</span>) !== <span class="number">-1</span>) &#123;</span><br><span class="line">            url.pathname = url.pathname.replace(</span><br><span class="line">                /\/([^\/]+)\/([^\/]+)\/index.js$/,</span><br><span class="line">                <span class="string">'/$1/$2/$1.js'</span></span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div>
</article>
<nav class="p-article-adjacent g-clearfix">
	<a href="/jraiser/article/list/faq/third-party-module.html" class="p-article-adjacent__prev">调用第三方模块</a>
	
</nav>
		<script>
		!function() {
			var links = document.querySelectorAll('#main a'), host = window.location.host;
			for (var i = links.length - 1; i >= 0; i--) {
				if (links[i].host !== host) { links[i].target = '_blank'; }
			}
		}();
		</script>
	</div>
	<aside id="sidebar" class="c-sidebar">
	<nav class="c-sidebar__nav">
		<div class="c-sidebar__nav__title">入门</div>
		<ul class="c-sidebar__nav__list">
			<li><a href="/jraiser/article/list/beginner/why-modular.html">为什么模块化</a></li>
			<li><a href="/jraiser/article/list/beginner/quick-start.html">快速上手</a></li>
			<li><a href="/jraiser/article/list/beginner/build.html">构建</a></li>
		</ul>
	</nav>
	<nav class="c-sidebar__nav">
		<div class="c-sidebar__nav__title">进阶</div>
		<ul class="c-sidebar__nav__list">
			<li><a href="/jraiser/article/list/advanced/build-by-gulp.html">与Gulp搭配使用</a></li>
		</ul>
	</nav>
	<nav class="c-sidebar__nav">
		<div class="c-sidebar__nav__title">常见问题</div>
		<ul class="c-sidebar__nav__list">
			<li><a href="/jraiser/article/list/faq/third-party-module.html">调用第三方模块</a></li>
			<li><a href="/jraiser/article/list/faq/about-module-id.html">关于模块ID</a></li>
		</ul>
	</nav>
</aside>
<script>
!function(global) {
	var sideNavLinks = global.document.querySelectorAll('#sidebar a');
	var pathname = global.location.pathname;
	for (var i = sideNavLinks.length - 1; i >= 0; i--) {
		if (sideNavLinks[i].getAttribute('href') === pathname) {
			sideNavLinks[i].parentNode.className = 'sidebar__nav__list__item--current';
			return;
		}
	}
}(window);
</script>
</div>
<footer class="c-footer g-keep-bottom js-keep-bottom">
	<div class="g-boundary g-clearfix">
		<div class="c-footer__copyright">
			<p>Copyright &copy; 2012-2018 <a href="//mrluo.life/" target="_blank">Mr.Luo</a></p>
			<p>Released under the <a href="https://opensource.org/licenses/MIT" target="_blank">MIT license</a></p>
		</div>
		<div class="c-footer__related">
			<p>相关链接：</p>
			<ul class="c-footer__related__list g-clearfix">
				<li><a href="https://github.com/heeroluo/bowljs" target="_blank">Bowl.js项目</a></li>
				<li><a href="https://github.com/heeroluo/bowljs-cli" target="_blank">Bowljs CLI项目</a></li>
			</ul>
		</div>
	</div>
</footer>
<script>
!function(global) {
	var body = global.document.body;
	function updateBottomHeight() {
		var elts = body.querySelectorAll('.js-keep-bottom');
		var totalHeight = 0, lastHeight;
		for (var i = elts.length - 1; i >= 0; i--) {
			if (lastHeight) { elts[i].style.bottom = lastHeight + 'px'; }
			lastHeight = elts[i].offsetHeight;
			totalHeight += lastHeight;
		}
		body.style.paddingBottom = totalHeight + 'px';
	}
	global.addEventListener('resize', updateBottomHeight, false);
	updateBottomHeight();
	if (/\bEdge\b/.test(global.navigator.userAgent)) {
		setTimeout(updateBottomHeight, 0);
	}
}(window);
</script>
<div style="display: none;"><script src="//s4.cnzz.com/stat.php?id=4803075&amp;web_id=4803075"></script></div>
</body>
</html>