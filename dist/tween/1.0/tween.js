define("tween/1.0/tween",["base/1.2/base","promise/1.2/promise"],function(n,e,t){"use strict";var s,c=n("../../base/1.2/base"),r=n("../../promise/1.2/promise");s="undefined"!=typeof global?global:"undefined"!=typeof window?window:this;var f={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2},easeInQuad:function(n,e,t,r,a){return r*(e/=a)*e+t},easeOutQuad:function(n,e,t,r,a){return-r*(e/=a)*(e-2)+t},easeInOutQuad:function(n,e,t,r,a){return(e/=a/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t},easeInCubic:function(n,e,t,r,a){return r*(e/=a)*e*e+t},easeOutCubic:function(n,e,t,r,a){return r*((e=e/a-1)*e*e+1)+t},easeInOutCubic:function(n,e,t,r,a){return(e/=a/2)<1?r/2*e*e*e+t:r/2*((e-=2)*e*e+2)+t},easeInQuart:function(n,e,t,r,a){return r*(e/=a)*e*e*e+t},easeOutQuart:function(n,e,t,r,a){return-r*((e=e/a-1)*e*e*e-1)+t},easeInOutQuart:function(n,e,t,r,a){return(e/=a/2)<1?r/2*e*e*e*e+t:-r/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(n,e,t,r,a){return r*(e/=a)*e*e*e*e+t},easeOutQuint:function(n,e,t,r,a){return r*((e=e/a-1)*e*e*e*e+1)+t},easeInOutQuint:function(n,e,t,r,a){return(e/=a/2)<1?r/2*e*e*e*e*e+t:r/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(n,e,t,r,a){return-r*Math.cos(e/a*(Math.PI/2))+r+t},easeOutSine:function(n,e,t,r,a){return r*Math.sin(e/a*(Math.PI/2))+t},easeInOutSine:function(n,e,t,r,a){return-r/2*(Math.cos(Math.PI*e/a)-1)+t},easeInExpo:function(n,e,t,r,a){return 0==e?t:r*Math.pow(2,10*(e/a-1))+t},easeOutExpo:function(n,e,t,r,a){return e==a?t+r:r*(1-Math.pow(2,-10*e/a))+t},easeInOutExpo:function(n,e,t,r,a){return 0==e?t:e==a?t+r:(e/=a/2)<1?r/2*Math.pow(2,10*(e-1))+t:r/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(n,e,t,r,a){return-r*(Math.sqrt(1-(e/=a)*e)-1)+t},easeOutCirc:function(n,e,t,r,a){return r*Math.sqrt(1-(e=e/a-1)*e)+t},easeInOutCirc:function(n,e,t,r,a){return(e/=a/2)<1?-r/2*(Math.sqrt(1-e*e)-1)+t:r/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(n,e,t,r,a){var u=1.70158,i=0,o=r;if(0==e)return t;if(1==(e/=a))return t+r;if(i||(i=.3*a),o<Math.abs(r)){o=r;u=i/4}else u=i/(2*Math.PI)*Math.asin(r/o);return-o*Math.pow(2,10*(e-=1))*Math.sin((e*a-u)*(2*Math.PI)/i)+t},easeOutElastic:function(n,e,t,r,a){var u=1.70158,i=0,o=r;if(0==e)return t;if(1==(e/=a))return t+r;if(i||(i=.3*a),o<Math.abs(r)){o=r;u=i/4}else u=i/(2*Math.PI)*Math.asin(r/o);return o*Math.pow(2,-10*e)*Math.sin((e*a-u)*(2*Math.PI)/i)+r+t},easeInOutElastic:function(n,e,t,r,a){var u=1.70158,i=0,o=r;if(0==e)return t;if(2==(e/=a/2))return t+r;if(i||(i=a*(.3*1.5)),o<Math.abs(r)){o=r;u=i/4}else u=i/(2*Math.PI)*Math.asin(r/o);return e<1?o*Math.pow(2,10*(e-=1))*Math.sin((e*a-u)*(2*Math.PI)/i)*-.5+t:o*Math.pow(2,-10*(e-=1))*Math.sin((e*a-u)*(2*Math.PI)/i)*.5+r+t},easeInBack:function(n,e,t,r,a,u){return u==undefined&&(u=1.70158),r*(e/=a)*e*((u+1)*e-u)+t},easeOutBack:function(n,e,t,r,a,u){return u==undefined&&(u=1.70158),r*((e=e/a-1)*e*((u+1)*e+u)+1)+t},easeInOutBack:function(n,e,t,r,a,u){return u==undefined&&(u=1.70158),(e/=a/2)<1?r/2*(e*e*((1+(u*=1.525))*e-u))+t:r/2*((e-=2)*e*((1+(u*=1.525))*e+u)+2)+t},easeInBounce:function(n,e,t,r,a){return r-this.easeOutBounce(n,a-e,0,r,a)+t},easeOutBounce:function(n,e,t,r,a){return(e/=a)<1/2.75?r*(7.5625*e*e)+t:e<2/2.75?r*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?r*(7.5625*(e-=2.25/2.75)*e+.9375)+t:r*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(n,e,t,r,a){return e<a/2?.5*this.easeInBounce(n,2*e,0,r,a)+t:.5*this.easeOutBounce(n,2*e-a,0,r,a)+.5*r+t}};function h(n,e,t){var r,a=n.startValue,u=n.endValue;if(c.isObject(a)&&c.isObject(u))for(t in r={},a)a.hasOwnProperty(t)&&(r[t]=h({startValue:a[t],endValue:u[t],duration:n.duration,easing:n.easing,frame:n.frame},e,t));else{r=1<=e?u:function i(n,t,r,a,u){var e;return"number"==typeof n&&"number"==typeof t?e=n+(t-n)*a.call(f,u,r*u,0,1,r):Array.isArray(n)&&Array.isArray(t)&&(e=n.map(function(n,e){return i(n,t[e],r,a,u)})),null!=e?e:t}(a,u,n.duration,n.easing,e);try{n.frame.call(s,r,t)}catch(o){n.onerror.call(s,o)}}return r}function u(n,e){var t=1-e/n.duration,r=h(n,t);return n.onprogress&&n.onprogress.call(s,r,t,e),1<=t&&n.oncomplete.call(s),t}var a,i,o=(a=[],i=0,{add:function(n){return n.taskId=++i,n.startTime=+new Date,a.push(n),n.taskId},findIndex:function(n){for(var e,t=0,r=a.length-1;t<=r;){if(e=parseInt((t+r)/2),a[e].taskId==n)return e;a[e].taskId>n?r=e-1:t=e+1}return-1},remove:function(n){return a.splice(n,1)[0]},isEmpty:function(){return!a.length},tick:function(){for(var n,e=0;n=a[e];)1<=u(n,Math.max(0,n.startTime+n.duration-new Date))?a.splice(e,1):e++}}),d=function(){var n,e=s.document,t=s.requestAnimationFrame,r=13;function a(){o.isEmpty()?n=!1:(n=!0,e&&!1===e.hidden&&t?t(a):setTimeout(a,r),o.tick())}return{run:function(){n||a()}}}();e.create=function(u){return new r(function(n,e){var t=u.easing||"linear";if("function"!=typeof t){var r=String(t);if(!(t=f[r]))return void e(new Error('Easing "'+r+'" does not exist'))}if((u=c.extend({},u,{easing:t})).duration=Math.abs(parseFloat(u.duration))||400,u.frame){u.oncomplete=n,u.onerror=e;var a=o.add(u);d.run(),u.receiveId&&u.receiveId.call(s,a)}else e(new Error('Please specify the "frame" function'))})},e.remove=function(n,e){var t=o.findIndex(n);if(-1!==t){var r=o.remove(t);if(e)u(r,0);else{var a=new Error("Tween has been removed");a.isTweenRemoval=!0,r.onerror.call(s,a)}}}});