define("dom/1.2/dom-traversal",["base/1.2/base","dom/1.2/dom-base","dom/1.2/sizzle"],function(n,e,t){"use strict";var u=n("../../base/1.2/base"),s=n("./dom-base"),f=n("./sizzle"),c=e.selfAndDescendants=function(n){if(n&&s.isNode(n)){if(1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)return[n];var e,t=[n];if(n.getElementsByTagName?e=n.getElementsByTagName("*"):n.querySelectorAll&&(e=n.querySelectorAll("*")),e)u.mergeArray(t,e);else if(e=n.childNodes)for(var r,i=e.length,o=-1;++o<i;)(r=c(e[o]))&&u.mergeArray(t,r);return t}};function i(n,e,t){return new t(e?f.matches(e,n):n)}function l(n,e,t,r){return f.uniqueSort(n),"parentNode"!==e&&"previousSibling"!==e||n.reverse(),i(n,t,r)}function r(n,e,t,r){var i;"string"==typeof t?i=function(n){return f.matchesSelector(n,t)}:s.isNode(t)&&(i=function(n){return n===t});var o=[];return n.forEach(function(n){for(;n=n[e];)if(1===n.nodeType||9===n.nodeType){if(t&&i(n))break;o.push(n)}}),l(o,e,r,n.constructor)}function o(n,e,t,r){var i=[];return n.forEach(function(n){for(;(n=n[e])&&(1!==n.nodeType&&9!==n.nodeType||(i.push(n),!r)););}),l(i,e,t,n.constructor)}e.shortcuts={index:function(n){var e=this.get(0),t=-1,r=s.isNode(e)&&!!e.parentNode;if(e)if(null==n){if(r){var i=e;for(t=0;i=i.previousSibling;)1===i.nodeType&&t++}}else"string"==typeof n?r&&(t=f(n).indexOf(e)):t=this.indexOf(s.isNode(n)?n:n[0]);return t},children:function(n){var t=[];return this.forEach(function(n){for(var e=n.firstChild;e;)1===e.nodeType&&t.push(e),e=e.nextSibling}),1<this.length&&f.uniqueSort(t),i(t,n,this.constructor)},next:function(n){return o(this,"nextSibling",n,!0)},nextAll:function(n){return o(this,"nextSibling",n)},prev:function(n){return o(this,"previousSibling",n,!0)},prevAll:function(n){return o(this,"previousSibling",n)},parent:function(n){return o(this,"parentNode",n,!0)},parents:function(n){return o(this,"parentNode",n)},siblings:function(n){var t=[];return this.forEach(function(n){for(var e=n;e=e.previousSibling;)1===e.nodeType&&t.push(e);for(e=n;e=e.nextSibling;)1===e.nodeType&&t.push(e)}),f.uniqueSort(t),i(t,n,this.constructor)},nextUntil:function(n,e){return r(this,"nextSibling",n,e)},prevUntil:function(n,e){return r(this,"previousSibling",n,e)},parentsUntil:function(n,e){return r(this,"parentNode",n,e)}}});