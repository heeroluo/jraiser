define("dom/1.2/dom-animation",["base/1.2/base","promise/1.2/promise","tween/1.0/tween","dom/1.2/dom-base","dom/1.2/dom-data","dom/1.2/dom-style","dom/1.2/sizzle","dom/1.2/dom-offset"],function(e,t,r){"use strict";var s=e("../../promise/1.2/promise"),a=e("../../tween/1.0/tween"),i=e("./dom-base"),n=e("./dom-data"),u=e("./dom-style"),l=e("./dom-offset"),o=/^[+-]?\d+(?:\.\d+)?[^\s]*$/,c=/^scroll(Top|Left)$/,p=/color$/i,f=/^#[0-9a-f]{6}$/i,m=/^rgb\((\d+),\s(\d+),\s(\d+)\)$/;function g(e,t){return"string"==typeof t&&(o.test(t)?t=parseFloat(t,10)||0:p.test(e)?f.test(t)?t=[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]:m.test(t)&&(t=[Number(RegExp.$1),Number(RegExp.$2),Number(RegExp.$3)]):t=t.toLowerCase()),t}var d=n.createDataSpace({cloneable:!1});function h(e,t){if(i.isHTMLElement(e)){var r=d.get(e,"taskId");r&&(a.remove(r,t),d.clear(e))}}function b(r,e,t){if(i.isHTMLElement(r)){t=t||{};var n=function s(e,t){var r,n={};for(var o in t)t.hasOwnProperty(o)&&(r="width"===o||"height"===o?u.getSize(e,o):c.test(o)?l.getScroll(e,RegExp.$1):g(o,u.getStyle(e,o)),n[o]=r);return n}(r,e);return e=function o(e,t){var r,n={};for(r in e)e.hasOwnProperty(r)&&(n[r]=u.rRelNumber.test(e[r])?(parseFloat(t[r],10)||0)+Number(RegExp.$1+RegExp.$2):g(r,e[r]));return n}(e,n),h(r),a.create({startValue:n,endValue:e,duration:t.duration,easing:t.easing,receiveId:function(e){d.set(r,"taskId",e)},frame:function(e,t){c.test(t)?l.setScroll(r,RegExp.$1,e):u.setStyle(r,t,p.test(t)?"rgb("+e.map(function(e){return Math.min(255,Math.round(e))}).join(", ")+")":e)},onprogress:function(){t.onprogress&&t.onprogress.apply(r,arguments)}})["finally"](function(){d.clear(r),t.oncomplete&&t.oncomplete.call(r)})}}t.shortcuts={animate:function(t,r,e){for(var n in"boolean"==typeof r&&(e=r,r=null),t)t.hasOwnProperty(n)&&(t[n]=g(n,t[n]));var o=this.map(function(e){return b(e,t,r)});return e?s.all(o):this},stop:function(t){return this.forEach(function(e){h(e,t)}),this}}});