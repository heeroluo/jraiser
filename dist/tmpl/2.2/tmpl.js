define("tmpl/2.2/tmpl",["base/1.2/base"],function(e,t,n){"use strict";var o=e("../../base/1.2/base"),r=[],i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};for(var a in i)r.push(a);function c(e){return String(e).replace(r,function(e){return i[e]})}r=new RegExp("["+r.join("")+"]","g");var s={};function l(e){if(!e)return s["default"];var t=e.join("|");if(!s[t]){var n={delimiterBegin:e[0],delimiterEnd:e[1]};n.reEvaluate=new RegExp("((^|"+e[1]+")[^\\t]*)'","g"),n.reValue=new RegExp("\\t-(.*?)"+e[1],"g"),n.reEscapedValue=new RegExp("\\t=(.*?)"+e[1],"g"),s[t]=n}return s[t]}s["default"]=l(["<%","%>"]);var u,p=o.createClass(function(e,t){this._templates={},this._settings=l(t?t.delimiters:null),this.add(e)},{add:function(e,t){switch(typeof e){case"string":this._templates[e]=t;break;case"object":o.extend(this._templates,e)}},has:function(e){return this._templates.hasOwnProperty(e)},render:function(e,t,n){var r=this._templates[e];if(null==r)throw new Error('template "'+e+'" does not exist');o.isObject(r)||(r=this._templates[e]={fnBody:function p(e,t){return"var __result__='';__result__+='"+e.replace(/[\r\t\n]/g," ").split(t.delimiterBegin).join("\t").replace(t.reEvaluate,"$1\r").replace(t.reValue,"'+$1+'").replace(t.reEscapedValue,"'+__escape__($1)+'").split("\t").join("';").split(t.delimiterEnd).join("__result__+='").split("\r").join("\\'")+"';return __result__"}(r,this._settings),fnCache:{}});var i=[],a=[];if(null!=t)for(var s in t)t.hasOwnProperty(s)&&(i.push(s),a.push(t[s]));var l=i.toString(),u=r.fnCache[l];return u||(i.push("__escape__"),u=r.fnCache[l]=new Function(i,r.fnBody)),!1===n&&this.clear(e),a.push(c),u.apply(t,a)},clear:function(e){e?delete this._templates[e]:this._templates={}}});p.render=function(e,t,n){return(u=u||new p).has(e)||u.add(e,e),u.render(e,t,n)},p.escape=c,p.fromScripts=function(e){!e||"nodeType"in e||"function"!=typeof e.get||(e=e.get(0)),e&&1===e.nodeType||(e=document);for(var t={},n=e.getElementsByTagName("script"),r=0,i=n.length;r<i;r++)"text/template"===n[r].type&&(t[n[r].getAttribute("data-key")||""]=n[r].innerHTML.trim());return t},n.exports=p});