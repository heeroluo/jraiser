define("web-storage/1.1/web-storage",["base/1.2/base","timespan/1.0/timespan"],function(e,t,r){"use strict";var s=e("../../base/1.2/base"),o=e("../../timespan/1.0/timespan"),a=t.get=function(e){var t=sessionStorage.getItem(e);if(null==t){var r=localStorage.getItem(e);if(null!=r){try{r=JSON.parse(r)}catch(a){}r.expires&&new Date>r.expires?localStorage.removeItem(e):t=r.value}}return t};t.getAsJSON=function(e){var t=a(e);try{t=JSON.parse(t)}catch(r){t=null}return t};var i=t.remove=function(e){sessionStorage.removeItem(e),localStorage.removeItem(e)};t.set=function(e,t,r){if(i(e),t.constructor===Object&&(t=JSON.stringify(t)),r){if(s.isDate(r)||(r=o.addToDate(new Date,r)),r<new Date)return!0;var a={value:t,expires:r.getTime()};try{localStorage.setItem(e,JSON.stringify(a))}catch(n){return!1}}else try{sessionStorage.setItem(e,t)}catch(n){return!1}return!0}});