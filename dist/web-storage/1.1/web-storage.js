define("web-storage/1.1/web-storage",["base/1.2/base","timespan/1.0/timespan"],function(e,t,r){"use strict";var o=e("../../base/1.2/base"),i=e("../../timespan/1.0/timespan");t.get=function(e){var t=sessionStorage.getItem(e);if(null==t){var r=localStorage.getItem(e);if(null!=r){try{r=JSON.parse(r)}catch(a){}r.expires&&new Date>r.expires?localStorage.removeItem(e):t=r.value}}return t},t.getAsJSON=function(e){var t=this.get(e);try{t=JSON.parse(t)}catch(r){t=null}return t},t.set=function(e,t,r){if(this.remove(e),t.constructor===Object&&(t=JSON.stringify(t)),r){var a={value:t,expires:(o.isDate(r)?r:i.addToDate(new Date,r)).getTime()};try{localStorage.setItem(e,JSON.stringify(a))}catch(s){}}else try{sessionStorage.setItem(e,t)}catch(s){}},t.remove=function(e){sessionStorage.removeItem(e),localStorage.removeItem(e)}});