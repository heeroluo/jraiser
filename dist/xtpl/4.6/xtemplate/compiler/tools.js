define("xtpl/4.6/xtemplate/compiler/tools",null,function(e,r,n){"use strict";var t=/\\*"/g,o=/\\*'/g,u=[].push,a={};function i(e,r){var n=2<arguments.length&&arguments[2]!==undefined?arguments[2]:0,t=arguments[3];if(!e.length)return r;var o=t||r,u=e[0],a="t"+n;return["("+r+" != null ? ",i(e.slice(1),"("+a+" = "+(o+u)+")",n+1,a)," : ",o,")"].join("")}function g(e,r,n,t){return e?i(r.slice(1),n):t}!function(){for(var e=["undefined","null","true","false"],r=0;r<e.length;r++)a[e[r]]=1}();var d=n.exports={genStackJudge:i,isGlobalId:function(e){return a[e.string]?1:0},chainedVariableRead:function(e,r,n,t,o,u){var a=d.convertIdPartsToRawAccessor(e,r,n),i=a.parts,c=i[0],s="";t&&(s="scope.root.");var p=s+"affix",l=s+"data",f=["(","(t=("+(p+c)+")) !== undefined ? ",1<n.length?g(u,i,"t",p+a.str):"t"," : "];return o?f=f.concat(["(","(t = "+(l+c)+") !== undefined ? ",1<n.length?g(u,i,"t",l+a.str):"t","  : ",u?"scope.resolveLooseUp("+a.arr+")":"scope.resolveUp("+a.arr+")",")"]):f.push(g(u,i,l+c,l+a.str)),f.push(")"),f.join("")},convertIdPartsToRawAccessor:function(e,r,n){var t,o=void 0,u=void 0,a=void 0,i=void 0,c=[],s=[],p="";for(o=0,t=n.length;o<t;o++)(a=(u=n[o]).type)?(i=e[a](u),d.pushToArray(r,i.source),"function"===a&&(p=1),s.push("[ "+i.exp+" ]"),c.push(i.exp)):(s.push("."+u),c.push(d.wrapByDoubleQuote(u)));return{str:s.join(""),arr:"["+c.join(",")+"]",parts:s,funcRet:p,resolvedParts:c}},wrapByDoubleQuote:function(e){return'"'+e+'"'},wrapBySingleQuote:function(e){return"'"+e+"'"},joinArrayOfString:function(e){return d.wrapByDoubleQuote(e.join('","'))},escapeSingleQuoteInCodeString:function(e,r){return e.replace(r?t:o,function(e){var r=e;return r.length%2&&(r="\\"+r),r})},escapeString:function(e,r){var n=e;return n=(n=r?d.escapeSingleQuoteInCodeString(n,0):n.replace(/\\/g,"\\\\").replace(/'/g,"\\'")).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")},pushToArray:function(e,r){r&&u.apply(e,r)}}});