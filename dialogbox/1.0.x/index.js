/*!
 * JRaiser 2 Javascript Library
 * dialogbox - v1.0.0 (2014-11-22T19:45:34+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("dialogbox/1.0.x/",["widget/1.0.x/","popuplayer/1.0.x/","underscore/1.6.x/","dom/1.0.x/","fixedlayer/1.0.x/","uadetector/1.0.x/","draggable/1.0.x/"],function(e){"use strict";function t(e,t,i){var r=document.documentElement,o="top"===i?"Height":"Width";return(r["client"+o]-t)/2}var i=e("base/1.0.x/"),r=(e("dom/1.0.x/dom-style"),e("widget/1.0.x/")),o=e("popuplayer/1.0.x/"),a=e("fixedlayer/1.0.x/"),p=e("draggable/1.0.x/");return r.create(function(e){var t=this,r=t._wrapper=e.wrapper;t._popupContent=r,delete t._popupTrigger,e.fixedLayer&&(t._fixedLayer=new a(i.mix({wrapper:r,disabled:!0},e.fixedLayer,{overwrite:!1}))),e.draggable&&(t._draggable=new p(i.mix({wrapper:r,disabled:!0},e.draggable,{overwrite:!1})),t._fixedLayer&&t._draggable.on("dragstart",function(){t._fixedLayer.destroy()}).on("dragend",function(){t._fixedLayer.reposition()}))},{_init:function(){o.prototype._init.apply(this,arguments),this._wrapper.find(".dialogbox-close").click(this.close)},_destroy:function(){var e=this;o.prototype._init.apply(e,arguments),e._wrapper.find(".dialogbox-close").off("click",e.close),e._fixedLayer&&e._fixedLayer.destroy(),e._draggable&&e._draggable.destroy()},_computeStyle:function(e){var i=this,r=/^center$/i;o.prototype._computeStyle.apply(i,arguments);var a=i._options[e],p=i["_"+e];(r.test(a.left)||r.test(a.right))&&(p.left=t(i._wrapper,p.width,"left")),(r.test(a.top)||r.test(a.bottom))&&(p.top=t(i._wrapper,p.height,"top"))},_actionDone:function(e){var t=this._fixedLayer,r=this._draggable;o.prototype._actionDone.apply(this,arguments),e?(t&&t.options({position:i.mix({},this._popupStyle,{whiteList:["top","bottom","left","right"]}),disabled:!1}),r&&r.init()):(r&&r.destroy(),t&&t.destroy())}},{popupWhen:"",closeWhen:"",popupStyle:{width:"",height:"",top:"center",left:"center",visibility:"visible"},closedStyle:{width:0,height:0,top:"center",left:"center",visibility:"hidden"},draggable:{},fixedLayer:{}},o)});