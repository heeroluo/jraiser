/*!
 * JRaiser 2 Javascript Library
 * dialogbox - v1.0.0 (2014-11-22T19:45:34+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("dialogbox/1.0.x/",["widget/1.0.x/","popuplayer/1.0.x/","underscore/1.6.x/","dom/1.0.x/","fixedlayer/1.0.x/","uadetector/1.0.x/","draggable/1.0.x/"],function(e,t,i){"use strict";function r(e,t,i){var r=document.documentElement,o="top"===i?"Height":"Width";return(r["client"+o]-t)/2}var o=e("base/1.0.x/"),a=(e("dom/1.0.x/dom-style"),e("widget/1.0.x/")),p=e("popuplayer/1.0.x/"),n=e("fixedlayer/1.0.x/"),d=e("draggable/1.0.x/");return a.create(function(e){var t=this,i=t._wrapper=e.wrapper;t._popupContent=i,delete t._popupTrigger,e.fixedLayer&&(t._fixedLayer=new n(o.mix({wrapper:i,disabled:!0},e.fixedLayer,{overwrite:!1}))),e.draggable&&(t._draggable=new d(o.mix({wrapper:i,disabled:!0},e.draggable,{overwrite:!1})),t._fixedLayer&&t._draggable.on("dragstart",function(){t._fixedLayer.destroy()}).on("dragend",function(){t._fixedLayer.reposition()}))},{_init:function(){p.prototype._init.apply(this,arguments),this._wrapper.find(".dialogbox-close").click(this.close)},_destroy:function(){var e=this;p.prototype._init.apply(e,arguments),e._wrapper.find(".dialogbox-close").off("click",e.close),e._fixedLayer&&e._fixedLayer.destroy(),e._draggable&&e._draggable.destroy()},_computeStyle:function(e){var t=this,i=/^center$/i;p.prototype._computeStyle.apply(t,arguments);var o=t._options[e],a=t["_"+e];(i.test(o.left)||i.test(o.right))&&(a.left=r(t._wrapper,a.width,"left")),(i.test(o.top)||i.test(o.bottom))&&(a.top=r(t._wrapper,a.height,"top"))},_actionDone:function(e){var t=this._fixedLayer,i=this._draggable;p.prototype._actionDone.apply(this,arguments),e?(t&&t.options({position:o.mix({},this._popupStyle,{whiteList:["top","bottom","left","right"]}),disabled:!1}),i&&i.init()):(i&&i.destroy(),t&&t.destroy())}},{popupWhen:"",closeWhen:"",popupStyle:{width:"",height:"",top:"center",left:"center",visibility:"visible"},closedStyle:{width:0,height:0,top:"center",left:"center",visibility:"hidden"},draggable:{},fixedLayer:{}},p)});