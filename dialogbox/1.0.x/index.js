/*!
 * jRaiser 2 Javascript Library
 * dialogbox - v1.0.0 (2013-10-01T22:51:57+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("dialogbox/1.0.x/",["widget/1.0.x/","popuplayer/1.0.x/","fixedlayer/1.0.x/","underscore/1.4.x/","dom/1.0.x/","draggable/1.0.x/",null],function(e,t,n){"use strict";function f(e,t,n){var r=document.documentElement,s=n==="top"?"Height":"Width",o=(r["client"+s]-t)/2;return e.css("position")!=="fixed"&&(o=o+i.getScroll(window,n)-e.offsetParent().offset()[n]||0),o}var r=e("base/1.0.x/"),i=e("dom/1.0.x/dom-style"),s=e("widget/1.0.x/"),o=e("popuplayer/1.0.x/"),u=e("fixedlayer/1.0.x/"),a=e("draggable/1.0.x/");return s.create(function(e){var t=this,n=t._wrapper=e.wrapper;t._popupContent=n,delete t._popupTrigger,e.fixedLayer&&(t._fixedLayer=new u(r.mix({wrapper:n,disabled:!0},e.fixedLayer,{overwrite:!1}))),e.draggable&&(t._draggable=new a(r.mix({wrapper:n,disabled:!0},e.draggable,{overwrite:!1})),t._fixedLayer&&t._draggable.on("dragstart",function(){t._fixedLayer.destroy()}).on("dragend",function(){t._fixedLayer.reposition()}))},{_init:function(){o.prototype._init.apply(this,arguments),this._wrapper.find(".dialogbox-close").click(this.close)},_destroy:function(){o.prototype._init.apply(this,arguments),this._wrapper.find(".dialogbox-close").off("click",this.close)},_computeStyle:function(e){var t=this,n=/^center$/i;o.prototype._computeStyle.apply(t,arguments);var r=t._options[e],i=t["_"+e];if(n.test(r.left)||n.test(r.right))i.left=f(t._wrapper,i.width,"left");if(n.test(r.top)||n.test(r.bottom))i.top=f(t._wrapper,i.height,"top")},_actionDone:function(e){var t=this._fixedLayer,n=this._draggable;o.prototype._actionDone.apply(this,arguments),e?(t&&t.options({position:r.mix({},this._popupStyle,{whiteList:["top","bottom","left","right"]}),disabled:!1}),n&&n.init()):(n&&n.destroy(),t&&t.destroy())}},{popupWhen:"",closeWhen:"",popupStyle:{width:"",height:"",top:"center",left:"center",visibility:"visible"},closedStyle:{width:0,height:0,top:"center",left:"center",visibility:"hidden"},draggable:{},fixedLayer:{}},o)})