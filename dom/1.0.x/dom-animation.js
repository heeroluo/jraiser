/*!
 * JRaiser 2 Javascript Library
 * dom-animation - v1.0.1 (2014-06-09T16:51:32+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("dom/1.0.x/dom-animation",["base/1.0.x/","dom/1.0.x/dom-base","dom/1.0.x/dom-style"],function(t,e,n){"use strict";function r(t){var e=y.push(t)-1;return p||(p=setInterval(function(){for(var t=0;t<y.length;t++)y[t]&&y[t]()},13)),e}function i(t){if(y[t]=null,y.length){for(var e=!0,n=y.length-1;n>=0;n--)if(null!=y[n]){e=!1;break}e&&(y=[],p&&(clearInterval(p),p=null))}}function s(t){return"string"==typeof t&&(t=b.test(t)?parseFloat(t,10)||0:$.test(t)?[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]:E.test(t)?[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10)]:t.toLowerCase()),t}function a(t,e){var n,r,i={};for(n in t)r=t[n],i[n]=h.test(r)?e[n]+parseFloat(RegExp.$1+RegExp.$2,10):s(r);return i}function o(t,e){var n,r={};for(var i in e)n="width"===i||"height"===i?g.getSize(t,i):w.test(i)?g.getScroll(t,i.replace(w,"")):s(g.getStyle(t,i)),""===n&&null!=S[i]&&(n=S[i]),r[i]=n;return r}function l(t){return v.isWindow(t)||1===t.nodeType&&!v.isXMLNode(t)}function u(t,e,n,r){var i;return"number"==typeof t?"number"==typeof e&&(i=t+(e-t)*n(0,1,r),(e>t&&i>e||t>e&&e>i)&&(i=e)):d.isArray(t)&&d.isArray(e)&&(i=[],t.forEach(function(t,s){i[s]=parseInt(u(t,e[s],n,r),10)})),i||e}function f(t,e,n){if(l(t)){n=d.mix({duration:400,easing:"linear"},n,{ignoreNull:!0});var i=n.easing;if("string"==typeof i&&(i=x[i]),!i)throw new Error("please specify easing");var s=o(t,e);e=a(e,s),c(t),"visible"===e.visibility&&g.setStyle(t,"visibility","visible"),"block"===e.display&&g.setStyle(t,"display","block");var f=v.uniqueId(t),p=+new Date,y=r(function(){var r,a,o,l=new Date-p,f=l/n.duration;for(var d in e)"visibility"!==d&&"display"!==d&&(r=s[d],a=e[d],r!=a&&(o=u(r,a,i,f),w.test(d)?g.setScroll(t,d.replace(w,""),o):g.setStyle(t,d,I.test(d)?"rgb("+o.join(", ")+")":o)));if(l>=n.duration){c(t);for(var v in e)g.setStyle(t,v,I.test(v)?"rgb("+e[v]+")":e[v]);n.callback&&n.callback.call(t)}});m[f]=y}}function c(t){if(l(t)){var e=v.uniqueId(t),n=m[e];null!=n&&(i(n),delete m[e])}}var p,d=t("base/1.0.x/"),v=t("./dom-base"),g=t("./dom-style"),y=[],b=/^[+-]?\d+(?:\.\d+)?[^\s]*$/,h=/^([+-])=(\d+(?:\.\d+)?)$/,I=/color$/i,$=/^#[a-f0-9]{6}$/i,E=/^rgb\((\d+),\s(\d+),\s(\d+)\)$/,w=/^scroll/,S={opacity:1},x={linear:function(t,e,n,r){return t+e*n},swing:function(t,e,n,r){return(-Math.cos(n*Math.PI)/2+.5)*e+t}},m={};e.start=f,e.stop=c,e.shortcuts={animate:function(t,e){for(var n in t)t[n]=s(t[n]);return this.forEach(function(n){f(n,t,e)}),this},stop:function(){return this.forEach(function(t){c(t)}),this}}});