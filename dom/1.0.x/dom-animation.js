/*!
 * jRaiser 2 Javascript Library
 * dom-animation - v1.0.0 (2013-02-17T22:43:53+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("dom/1.0.x/dom-animation",["base/1.0.x/","dom/1.0.x/dom-base","dom/1.0.x/dom-style"],function(e,t,n){"use strict";function a(e){var t=o.push(e)-1;return u||(u=setInterval(function(){for(var e=0,t=o.length;e<t;e++)o[e]&&o[e]()},13)),t}function f(e){o[e]=null,o.join("")===""&&(o=[],u&&(clearInterval(u),u=null))}function g(e){return typeof e=="string"&&(l.test(e)?e=parseFloat(e)||0:p.test(e)?e=[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]:d.test(e)?e=[parseInt(RegExp.$1),parseInt(RegExp.$2),parseInt(RegExp.$3)]:e=e.toLowerCase()),e}function y(e,t){var n={},r;for(var i in t)i==="width"||i==="height"?r=s.getSize(e,i):v.test(i)?r=s.getScroll(e,i.replace(v,"")):r=g(s.getStyle(e,i)),r===""&&m.hasOwnProperty(i)&&(r=m[i]),n[i]=r;return n}function b(e){return i.isWindow(e)||e.nodeType===1&&!i.isXMLNode(e)}function E(e,t,n,i){var s;if(typeof e=="number"){typeof t=="string"&&c.test(t)&&(t=e+parseFloat(t));if(typeof e=="number"){s=e+(t-e)*n(0,1,i);if(t>e&&s>t||t<e&&s<t)s=t}}else r.isArray(e)&&r.isArray(t)?(s=[],e.forEach(function(e,r){s[r]=parseInt(E(e,t[r],n,i))})):s=t;return s}function x(e,t,n,o){if(!b(e))return;n=r.mix({duration:400,easing:"linear"},n,{ignoreNull:!0});var u=n.easing;typeof u=="string"&&(u=w[u]);if(!u)throw new Error("please specify easing");if(!o)for(var f in t)t[f]=g(t[f]);var l=y(e,t);T(e),t.visibility==="visible"&&s.setStyle(e,"visibility","visible"),t.display==="block"&&s.setStyle(e,"display","block");var c=i.uniqueId(e),p=+(new Date),d=a(function(){var r=+(new Date)-p,i=r/n.duration,o,a,f;for(var c in t){o=l[c],a=t[c];if(c==="visibility"||c==="display")continue;f=E(o,a,u,i),o!==a&&(v.test(c)?s.setScroll(e,c.replace(v,""),f):s.setStyle(e,c,h.test(c)?"rgb("+f.join(", ")+")":f))}if(r>=n.duration){T(e);for(var d in t)s.setStyle(e,d,t[d]);n.callback&&n.callback.call(e)}});S[c]=d}function T(e){if(!b(e))return;var t=i.uniqueId(e),n=S[t];n!=null&&(f(n),delete S[t])}var r=e("base/1.0.x/"),i=e("./dom-base"),s=e("./dom-style"),o=[],u,l=/^[+-]?\d+(?:\.\d+)?[^\s]*$/,c=/^([+-])?(\d+(?:\.\d+)?)[^\s]*$/,h=/color$/i,p=/^#[a-f0-9]{6}$/i,d=/^rgb\((\d+),\s(\d+),\s(\d+)\)$/,v=/^scroll/,m={opacity:1},w={linear:function(e,t,n,r){return e+t*n},swing:function(e,t,n,r){return(-Math.cos(n*Math.PI)/2+.5)*t+e}},S={};t.start=x,t.stop=T,t.shortcuts={animate:function(e,t){for(var n in e)e[n]=g(e[n]);return this.forEach(function(n){x(n,e,t,!0)}),this},stop:function(){return this.forEach(function(e){T(e)}),this}}})