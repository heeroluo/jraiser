/*!
 * JRaiser 2 Javascript Library
 * dom-animation - v1.0.1 (2014-06-09T16:51:32+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("dom/1.0.x/dom-animation",["base/1.0.x/","dom/1.0.x/dom-base","dom/1.0.x/dom-style"],function(t,e){"use strict";function n(t){var e=g.push(t)-1;return c||(c=setInterval(function(){for(var t=0;t<g.length;t++)g[t]&&g[t]()},13)),e}function r(t){if(g[t]=null,g.length){for(var e=!0,n=g.length-1;n>=0;n--)if(null!=g[n]){e=!1;break}e&&(g=[],c&&(clearInterval(c),c=null))}}function i(t){return"string"==typeof t&&(t=y.test(t)?parseFloat(t,10)||0:I.test(t)?[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16)]:$.test(t)?[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10)]:t.toLowerCase()),t}function s(t,e){var n,r,s={};for(n in t)r=t[n],s[n]=b.test(r)?e[n]+parseFloat(RegExp.$1+RegExp.$2,10):i(r);return s}function a(t,e){var n,r={};for(var s in e)n="width"===s||"height"===s?v.getSize(t,s):E.test(s)?v.getScroll(t,s.replace(E,"")):i(v.getStyle(t,s)),""===n&&null!=w[s]&&(n=w[s]),r[s]=n;return r}function o(t){return d.isWindow(t)||1===t.nodeType&&!d.isXMLNode(t)}function l(t,e,n,r){var i;return"number"==typeof t?"number"==typeof e&&(i=t+(e-t)*n(0,1,r),(e>t&&i>e||t>e&&e>i)&&(i=e)):p.isArray(t)&&p.isArray(e)&&(i=[],t.forEach(function(t,s){i[s]=parseInt(l(t,e[s],n,r),10)})),i||e}function u(t,e,r){if(o(t)){r=p.mix({duration:400,easing:"linear"},r,{ignoreNull:!0});var i=r.easing;if("string"==typeof i&&(i=S[i]),!i)throw new Error("please specify easing");var u=a(t,e);e=s(e,u),f(t),"visible"===e.visibility&&v.setStyle(t,"visibility","visible"),"block"===e.display&&v.setStyle(t,"display","block");var c=d.uniqueId(t),g=+new Date,y=n(function(){var n,s,a,o=new Date-g,c=o/r.duration;for(var p in e)"visibility"!==p&&"display"!==p&&(n=u[p],s=e[p],n!=s&&(a=l(n,s,i,c),E.test(p)?v.setScroll(t,p.replace(E,""),a):v.setStyle(t,p,h.test(p)?"rgb("+a.join(", ")+")":a)));if(o>=r.duration){f(t);for(var d in e)v.setStyle(t,d,h.test(d)?"rgb("+e[d]+")":e[d]);r.callback&&r.callback.call(t)}});x[c]=y}}function f(t){if(o(t)){var e=d.uniqueId(t),n=x[e];null!=n&&(r(n),delete x[e])}}var c,p=t("base/1.0.x/"),d=t("./dom-base"),v=t("./dom-style"),g=[],y=/^[+-]?\d+(?:\.\d+)?[^\s]*$/,b=/^([+-])=(\d+(?:\.\d+)?)$/,h=/color$/i,I=/^#[a-f0-9]{6}$/i,$=/^rgb\((\d+),\s(\d+),\s(\d+)\)$/,E=/^scroll/,w={opacity:1},S={linear:function(t,e,n){return t+e*n},swing:function(t,e,n){return(-Math.cos(n*Math.PI)/2+.5)*e+t}},x={};e.start=u,e.stop=f,e.shortcuts={animate:function(t,e){for(var n in t)t[n]=i(t[n]);return this.forEach(function(n){u(n,t,e)}),this},stop:function(){return this.forEach(function(t){f(t)}),this}}});