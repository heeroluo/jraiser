/*!
 * JRaiser 2 Javascript Library
 * dom-event - v1.0.0 (2014-03-20T14:40:06+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("dom/1.0.x/dom-event",["base/1.0.x/","dom/1.0.x/sizzle","dom/1.0.x/dom-base","dom/1.0.x/dom-event-arg"],function(e,t,n){"use strict";function r(e){return m.isWindow(e)||!m.isXMLNode(e)&&(1===e.nodeType||9===e.nodeType)}function o(e){var t,n=e.indexOf(".");return-1!==n&&(t=e.substr(n+1),e=e.substr(0,n)),[e,t]}function i(e,t){var n=this,r=m.uniqueId(n);if(!(T.isBlocked(r,e.type)||e.target&&T.isBlocked(m.uniqueId(e.target),e.type))){var o=E[e.type]?E[e.type].bindType:e.type,i=(w[r]||{})[o];i&&(t&&"string"!=typeof t&&(t=null),e=b.fix(e),i.forEach(function(r){if(!(t&&r.namespace!==t||e.isTrigger&&r.bindType!==e.type)){var o;if(r.delegator){var i=h(r.delegator,n),a=e.target;do{if(-1!==i.indexOf(a)){o=a,e.delegateTarget=n;break}a=a.parentNode}while(a&&a!==n);if(!o)return}else o=n;e.hasOwnProperty("data")||(e.data=r.data);var l=r.handle?r.handle.call(o,r,e):r.handler.call(o,e);l===!1&&e.preventDefault(),e.cancelBubble===!0&&e.stopPropagation()}}))}}function a(e,t,n,r,o,i){var a=E[n],l=a?a.bindType:n,c=t[l];if(c){if(i.allowRepeated===!1)for(var s=c.length-1;s>=0;s--)if(c[s].handler===r&&c[s].bindType===l)return}else t[l]=[],d(e,l,o);delete i.allowRepeated,t[l].push(p.mix({handler:r,bindType:n,handle:a?a.handle:null},i,{overwrite:!1}))}function l(e,t,n,r,o,i){var a=E[n],l=a?a.bindType:n;if(l){var c=t[l];if(c){for(var s=c.length-1;s>=0;s--)n!==c[s].bindType||r!==c[s].handler&&r||null!=i&&i!==c[s].namespace||c.splice(s,1);c.length||(delete t[l],f(e,l,o))}}else for(var s in t)f(e,s,o)}function c(e,t,n,l,c){if(r(e)){c||(t=g(t));var s=m.uniqueId(e),u=w[s]=w[s]||{},d=k[s]=k[s]||function(){i.apply(e,arguments)};t.forEach(function(t){t=o(t),a(e,u,t[0],n,d,p.mix({namespace:t[1]},l))})}}function s(e,t,n,i){if(r(e)){i||(t=g(t));var a=m.uniqueId(e),c=w[a],s=k[a];if(c&&s){var u;t?(t.forEach(function(t){t=o(t),t[0]&&l(e,c,t[0],n,s,t[1])}),p.isEmptyObject(c)&&(u=!0)):(l(e,c,null,null,s),u=!0),u&&(delete w[a],delete k[a])}}}function u(e,t,n){if(r(e)&&t){t=o(t),n=n||{};var a=b.fix(p.extend({type:t[0],target:e},x[v[t[0]]])),l=e,c=null!=n.bubbles?n.bubbles:X[t[0]];a.isTrigger=!0,null!=n.data&&(a.data=n.data);do i.call(e,a,t[1]),e=e.parentNode;while(c&&e&&!a.isPropagationStopped());if(K[t[0]]&&!a.isDefaultPrevented()&&t[0]in l){var s=m.uniqueId(l);T.add(s,t[0]),l[t[0]](),T.remove(s,t[0])}}}var d,f,p=e("base/1.0.x/"),h=e("./sizzle"),m=e("./dom-base"),y=e("./dom-event-arg"),g=m.splitBySpace,v={},b={props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),keyHook:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHook:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement touches".split(" "),filter:function(e,t){var n,r,o,i=t.button,a=t.fromElement,l=t.touches;return l&&1===l.length&&(e.pageX=l[0].pageX,e.pageY=l[0].pageY),null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||document,r=n.documentElement,o=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||p.isUndefined(i)||(e.which=1&i?1:2&i?3:4&i?2:0),e}},fix:function(e){if(e instanceof y)return e;var t=e,n=this[v[e.type]+"Hook"],r=n&&n.props?this.props.concat(n.props):this.props;return e=p.mix(new y(e),t,{whiteList:r}),e.target||(e.target=t.srcElement||document),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,n&&n.filter?n.filter(e,t):e}};document.addEventListener?(d=function(e,t,n){e.addEventListener(t,n,!1)},f=function(e,t,n){e.removeEventListener(t,n,!1)}):document.attachEvent&&(d=function(e,t,n){e.attachEvent("on"+t,n)},f=function(e,t,n){e.detachEvent("on"+t,n)});var w={},T={_data:{},add:function(e,t){this._data[e]=this._data[e]||{},this._data[e][t]=!0},remove:function(e,t){var n=this._data[e];n&&delete n[t],p.isEmptyObject(n)&&delete this._data[e]},isBlocked:function(e,t){return Boolean((this._data[e]||{})[t])}},k={},E={};p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){E[t]={bindType:e,handle:function(e,n){var r,o=n.relatedTarget;if(!n||!o||o!==this&&!h.contains(this,o)){var i=n.type;n.type=t,r=e.handler.call(this,n),n.type=i}return r}}});var x={key:{view:window,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:0},mouse:{view:window,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0},ui:{view:window}},K={focus:!0,blur:!0,click:!0,reset:!0,submit:!0},X={scroll:!0,resize:!0,select:!0,error:!0,reset:!0,submit:!0,change:!0,abort:!0};n.exports={on:c,off:s,trigger:u,shortcuts:{on:function(e,t,n){return e=g(e),e&&this.forEach(function(r){c(r,e,t,n,!0)}),this},off:function(e,t){return e=g(e),this.forEach(function(n){s(n,e,t,!0)}),this},trigger:function(e,t){return this.forEach(function(n){u(n,e,t)}),this}}};var Y=n.exports.shortcuts,L=/^key/,C=/^(?:mouse|contextmenu|touch)|click/;"blur focus load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave touchstart touchmove touchend change select submit keydown keypress keyup error contextmenu".split(" ").forEach(function(e){L.test(e)?(X[e]=!0,v[e]="key"):C.test(e)&&(X[e]=!0,v[e]="mouse"),Y[e]=function(t,n){return arguments.length?this.on(e,t,n):this.trigger(e)}}),L=null,C=null});