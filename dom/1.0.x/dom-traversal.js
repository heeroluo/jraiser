/*!
 * JRaiser 2 Javascript Library
 * dom-traversal - v1.0.0 (2013-08-17T21:28:23+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("dom/1.0.x/dom-traversal",["dom/1.0.x/dom-base","dom/1.0.x/sizzle"],function(n,t,r){"use strict";function i(n,t){return t?s.matches(t,n):n}function e(n,t,r,e){var u=o.isNode(r)?[r]:s(r),f=[];return n.forEach(function(n){for(;n=n[t];)if(1===n.nodeType){if(-1!==u.indexOf(n))break;f.push(n)}}),s.uniqueSort(f),"parentNode"===t&&f.reverse(),new n.constructor(i(f,e))}function u(n,t,r,e){var u=[];return n.forEach(function(n){for(;(n=n[t])&&(1!==n.nodeType||(u.push(n),!e)););}),new n.constructor(i(u,r))}var o=n("./dom-base"),s=n("./sizzle");return{shortcuts:{index:function(n){return this.length?null==n?s("> *",this[0].parentNode).indexOf(this[0]):"string"==typeof n?s(n).indexOf(this[0]):this.indexOf(o.isNode(n)?n:n[0]):-1},children:function(n){var t=[];return this.forEach(function(n){for(var r=n.firstChild;r;)1===r.nodeType&&t.push(r),r=r.nextSibling}),t.length>1&&s.uniqueSort(t),new this.constructor(i(t,n))},next:function(n){return u(this,"nextSibling",n,!0)},nextAll:function(n){return u(this,"nextSibling",n)},prev:function(n){return u(this,"previousSibling",n,!0)},prevAll:function(n){return u(this,"previousSibling",n)},parent:function(n){return u(this,"parentNode",n,!0)},parents:function(n){return u(this,"parentNode",n)},siblings:function(n){var t=this,r=0;return this.parent().children(n).filter(function(n){for(var i=r;i<t.length;i++)if(t[i]===n)return r++,!1;return!0})},nextUntil:function(n,t){return e(this,"nextSibling",n,t)},prevUntil:function(n,t){return e(this,"previousSibling",n,t)},parentsUntil:function(n,t){return e(this,"parentNode",n,t)}}}});