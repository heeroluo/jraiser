/*!
 * JRaiser 2 Javascript Library
 * micro-templating - v2.0.2 (2014-06-10T09:29:50+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("tmpl/2.0.x/",["base/1.0.x/"],function(e,t,n){"use strict";function r(e){return String(e).replace(_,function(e){return u[e]})}function i(e){if(!e)return c["default"];var t=e.join("|");if(!c[t]){var n={delimiter_begin:e[0],delimiter_end:e[1]};n.re_evaluate=new RegExp("((^|"+e[1]+")[^\\t]*)'","g"),n.re_value=new RegExp("\\t-(.*?)"+e[1],"g"),n.re_escaped_value=new RegExp("\\t=(.*?)"+e[1],"g"),c[t]=n}return c[t]}function a(e,t){return new Function("obj","escape","var __p__=[],print=function(){__p__.push.apply(__p__,arguments);};with(obj){__p__.push('"+e.replace(/[\r\t\n]/g," ").split(t.delimiter_begin).join("	").replace(t.re_evaluate,"$1\r").replace(t.re_value,"',$1,'").replace(t.re_escaped_value,"',escape($1),'").split("	").join("');").split(t.delimiter_end).join("__p__.push('").split("\r").join("\\'")+"');}return __p__.join('');")}function s(e,t,n){if(null==e||null==t)return e;var s=o[e];return s||(s=a(e,i()),n!==!1&&(o[e]=s)),s(t,r)}var l=e("base/1.0.x/"),_=[],u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};for(var p in u)_.push(p);var _=new RegExp("["+_.join("")+"]","g"),c={};c["default"]=i(["<%","%>"]);var o={},f=l.createClass(function(e,t){this._templates={},this._settings=i(t?t.delimiters:null),this.add(e)},{add:function(e,t){switch(typeof e){case"string":this._templates[e]=t;break;case"object":l.extend(this._templates,e)}},render:function(e,t,n){var i=this._templates[e];if(null==i)throw new Error("template<"+e+"> does not exist");if("string"==typeof i){if(null==t)return i;i=this._templates[e]=a(i,this._settings)}return n===!1&&this.clear(e),i(null==t?{}:t,r)},clear:function(e){e?delete this._templates[e]:this._templates={}}});return f.render=s,f.escape=r,f});