/*!
 * JRaiser 2 Javascript Library
 * draggable - v1.0.2 (2014-06-11T11:47:27+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("draggable/1.0.x/",["uadetector/1.0.x/","widget/1.0.x/","dom/1.0.x/"],function(t,e,o){"use strict";var r,i,a,n=t("base/1.0.x/"),l=t("uadetector/1.0.x/"),s=t("widget/1.0.x/"),p=t("dom/1.0.x/"),f=p(window),d=p(document);return l.isDevice("mobile")&&l.hasFeature("touch")?(r="touchstart",i="touchend",a="touchmove"):(r="mousedown",i="mouseup",a="mousemove"),s.create(function(t){var e=this;e._wrapper=t.wrapper,e._dragTrigger=e._wrapper.find(".draggable-trigger"),e._dragTrigger.length||(e._dragTrigger=e._wrapper)},{_init:function(t){var e=this;e.drag=function(t){var o=e._startPos;if(o&&null!=t.pageX&&null!=t.pageY){var r={left:t.pageX-o.left,top:t.pageY-o.top};e._isFixedPosition&&(r.left-=f.scrollLeft(),r.top-=f.scrollTop());var i=e._boundary;if(i){var a,l,s=e._wrapperSize;e._isFixedPosition?a=n.extend({},r):(a=e._wrapper.offset(),a.left+=r.left-e._oldPos.left,a.top+=r.top-e._oldPos.top,l=e._wrapper.offsetParent().offset()),a.right=a.left+s.width,a.bottom=a.top+s.height,l=l||{top:0,left:0},null!=i.right&&a.right>i.right&&(r.left=i.right-s.width-l.left),null!=i.left&&a.left<i.left&&(r.left=i.left-l.left),null!=i.bottom&&a.bottom>i.bottom&&(r.top=i.bottom-s.height-l.top),null!=i.top&&a.top<i.top&&(r.top=i.top-l.top)}e._wrapper.css(r),e._oldPos=r,e.trigger("drag",n.mix({position:r},t,{overwrite:!1}))}},e.end=function(t){e._startPos&&null!=t.pageX&&null!=t.pageY&&(e._wrapper.each(function(t){t.releaseCapture&&t.releaseCapture()}),d.off(a,e.drag),i&&d.off(i,e.end),f.off("blur",e.end),delete e._startPos,delete e._oldPos,delete e._wrapperSize,delete e._boundary,delete e._isFixedPosition,e.trigger("dragend",t))},e.start=function(t){if(!e._startPos&&null!=t.pageX&&null!=t.pageY&&!e.trigger("dragstart",t).isDefaultPrevented()){t.preventDefault();var o=e._wrapper,r=o.position(),n=o.css("position");"fixed"!==n&&"absolute"!==n&&(n="absolute",o.css("position",n)),e._isFixedPosition="fixed"===n,e._isFixedPosition?o.css({top:r.top-f.scrollTop(),left:r.left-f.scrollLeft()}):o.css(r),e._startPos={left:t.pageX-r.left,top:t.pageY-r.top},e._oldPos=r;var l=e._options.boundary;if(l){if("window"===l){var s=document.documentElement;e._boundary=e._isFixedPosition?{left:0,top:0,right:s.clientWidth,bottom:s.clientHeight}:{left:0,top:0,right:Math.max(s.scrollWidth,s.clientWidth),bottom:Math.max(s.scrollHeight,s.clientHeight)}}else if("parent"!==l||e._isFixedPosition)"function"==typeof l.offset?(e._boundary=l.offset(),e._boundary.right=e._boundary.left+l.innerWidth(),e._boundary.bottom=e._boundary.top+l.innerHeight()):e._boundary=l;else{var p=e._wrapper.offsetParent();p.length&&(e._boundary={left:p.offset().left,right:p.offset().left+p.innerWidth(),top:p.offset().top,bottom:p.offset().top+p.innerHeight()})}e._wrapperSize={width:e._wrapper.outerWidth(),height:e._wrapper.outerHeight()}}o.each(function(t){t.setCapture&&t.setCapture()}),d.on(a,e.drag),i&&d.on(i,e.end),f.on("blur",e.end)}},e._dragTrigger.on(r,e.start)},_destroy:function(t){var e=this;e._startPos&&e.end(),e._dragTrigger.off(r,e.start),delete e.drag,delete e.end,delete e.start}})});