/*!
 * JRaiser 2 Javascript Library
 * draggable - v1.0.2 (2014-06-11T11:47:27+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("draggable/1.0.x/",["uadetector/1.0.x/","widget/1.0.x/","dom/1.0.x/"],function(t){"use strict";var e,o,r,i=t("base/1.0.x/"),a=t("uadetector/1.0.x/"),n=t("widget/1.0.x/"),l=t("dom/1.0.x/"),s=l(window),p=l(document);return a.isDevice("mobile")&&a.hasFeature("touch")?(e="touchstart",o="touchend",r="touchmove"):(e="mousedown",o="mouseup",r="mousemove"),n.create(function(t){var e=this;e._wrapper=t.wrapper,e._dragTrigger=e._wrapper.find(".draggable-trigger"),e._dragTrigger.length||(e._dragTrigger=e._wrapper)},{_init:function(){var t=this;t.drag=function(e){var o=t._startPos;if(o&&null!=e.pageX&&null!=e.pageY){var r={left:e.pageX-o.left,top:e.pageY-o.top};t._isFixedPosition&&(r.left-=s.scrollLeft(),r.top-=s.scrollTop());var a=t._boundary;if(a){var n,l,p=t._wrapperSize;t._isFixedPosition?n=i.extend({},r):(n=t._wrapper.offset(),n.left+=r.left-t._oldPos.left,n.top+=r.top-t._oldPos.top,l=t._wrapper.offsetParent().offset()),n.right=n.left+p.width,n.bottom=n.top+p.height,l=l||{top:0,left:0},null!=a.right&&n.right>a.right&&(r.left=a.right-p.width-l.left),null!=a.left&&n.left<a.left&&(r.left=a.left-l.left),null!=a.bottom&&n.bottom>a.bottom&&(r.top=a.bottom-p.height-l.top),null!=a.top&&n.top<a.top&&(r.top=a.top-l.top)}t._wrapper.css(r),t._oldPos=r,t.trigger("drag",i.mix({position:r},e,{overwrite:!1}))}},t.end=function(e){t._startPos&&null!=e.pageX&&null!=e.pageY&&(t._wrapper.each(function(t){t.releaseCapture&&t.releaseCapture()}),p.off(r,t.drag),o&&p.off(o,t.end),s.off("blur",t.end),delete t._startPos,delete t._oldPos,delete t._wrapperSize,delete t._boundary,delete t._isFixedPosition,t.trigger("dragend",e))},t.start=function(e){if(!t._startPos&&null!=e.pageX&&null!=e.pageY&&!t.trigger("dragstart",e).isDefaultPrevented()){e.preventDefault();var i=t._wrapper,a=i.position(),n=i.css("position");"fixed"!==n&&"absolute"!==n&&(n="absolute",i.css("position",n)),t._isFixedPosition="fixed"===n,i.css(t._isFixedPosition?{top:a.top-s.scrollTop(),left:a.left-s.scrollLeft()}:a),t._startPos={left:e.pageX-a.left,top:e.pageY-a.top},t._oldPos=a;var l=t._options.boundary;if(l){if("window"===l){var f=document.documentElement;t._boundary=t._isFixedPosition?{left:0,top:0,right:f.clientWidth,bottom:f.clientHeight}:{left:0,top:0,right:Math.max(f.scrollWidth,f.clientWidth),bottom:Math.max(f.scrollHeight,f.clientHeight)}}else if("parent"!==l||t._isFixedPosition)"function"==typeof l.offset?(t._boundary=l.offset(),t._boundary.right=t._boundary.left+l.innerWidth(),t._boundary.bottom=t._boundary.top+l.innerHeight()):t._boundary=l;else{var d=t._wrapper.offsetParent();d.length&&(t._boundary={left:d.offset().left,right:d.offset().left+d.innerWidth(),top:d.offset().top,bottom:d.offset().top+d.innerHeight()})}t._wrapperSize={width:t._wrapper.outerWidth(),height:t._wrapper.outerHeight()}}i.each(function(t){t.setCapture&&t.setCapture()}),p.on(r,t.drag),o&&p.on(o,t.end),s.on("blur",t.end)}},t._dragTrigger.on(e,t.start)},_destroy:function(){var t=this;t._startPos&&t.end(),t._dragTrigger.off(e,t.start),delete t.drag,delete t.end,delete t.start}})});