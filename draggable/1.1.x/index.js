/*!
 * JRaiser 2 Javascript Library
 * draggable - v1.1.0 (2015-07-10T17:28:33+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("draggable/1.1.x/",["uadetector/1.0.x/","dom/1.1.x/","widget/1.1.x/"],function(t,e,o){"use strict";var r,i,n,s=t("uadetector/1.0.x/"),a=t("dom/1.1.x/"),d=t("widget/1.1.x/"),p=a(window),f=a(document);return s.isDevice("mobile")&&s.hasFeature("touch")?(r="touchstart",i="touchend",n="touchmove"):(r="mousedown",i="mouseup",n="mousemove"),d.create({_init:function(t){var e=this;e._wrapper=t.wrapper,e._dragTrigger=e._wrapper.find(".draggable__trigger"),e._dragTrigger.length||(e._dragTrigger=e._wrapper),e._onDOMEvent(e._dragTrigger,r,"_start")},_start:function(t){var e=this,o=e._wrapper;if(!(e._startPos||/^mouse/.test(t.type)&&1!==t.which)){var r=e._trigger("dragstart",{wrapper:o,sourceEvent:t}).isDefaultPrevented();if(!r){var s=o.position(),d=o.css("position");"fixed"!==d&&"absolute"!==d&&(d="absolute",o.css("position",d)),e._isFixedPosition="fixed"===d,o.css(s),e._startPos={left:t.pageX-s.left,top:t.pageY-s.top},e._oldPos=s;var l=e._options.boundary;if(l){if("window"===l){var _=document.documentElement;e._boundary=e._isFixedPosition?{right:_.clientWidth,bottom:_.clientHeight}:{right:Math.max(document.body.scrollWidth,_.scrollWidth,_.clientWidth),bottom:Math.max(document.body.scrollHeight,_.scrollHeight,_.clientHeight)},e._boundary.left=e._boundary.top=0}else if("parent"!==l||e._isFixedPosition)"function"!=typeof l.offset||e._isFixedPosition?e._boundary=l:(e._boundary=l.offset(),e._boundary.right=e._boundary.left+l.innerWidth(),e._boundary.bottom=e._boundary.top+l.innerHeight());else{var u=e._wrapper.offsetParent();u.length&&(e._boundary={left:u.offset().left,right:u.offset().left+u.innerWidth(),top:u.offset().top,bottom:u.offset().top+u.innerHeight()})}e._wrapperSize={width:o.outerWidth(),height:o.outerHeight()}}o.each(function(t){t.setCapture&&t.setCapture()}),e._onDOMEvent(f,n,{fn:"_drag",id:"drag"}),e._onDOMEvent(p,"blur",{fn:"end",id:"end"}),i&&e._onDOMEvent(f,i,{id:"end"}),a("body").css("user-select","none")}}},_drag:function(t){var e=this;if(e._startPos){var o={left:t.pageX-e._startPos.left,top:t.pageY-e._startPos.top},r=e._boundary;if(r){var i,n,s=e._wrapperSize;e._isFixedPosition?i={left:o.left,top:o.top}:(i=e._wrapper.offset(),i.left+=o.left-e._oldPos.left,i.top+=o.top-e._oldPos.top,n=e._wrapper.offsetParent().offset()),i.right=i.left+s.width,i.bottom=i.top+s.height,n=n||{top:0,left:0},null!=r.right&&i.right>r.right&&(o.left=r.right-s.width-n.left),null!=r.left&&i.left<r.left&&(o.left=r.left-n.left),null!=r.bottom&&i.bottom>r.bottom&&(o.top=r.bottom-s.height-n.top),null!=r.top&&i.top<r.top&&(o.top=r.top-n.top)}e._wrapper.css(o),e._oldPos=o,e._trigger("drag",{sourceEvent:t,wrapper:e._wrapper,position:o})}},end:function(t){var e=this;e._startPos&&(e._wrapper.each(function(t){t.releaseCapture&&t.releaseCapture()}),e._offDOMEvent(f,n,"drag"),i&&e._offDOMEvent(f,i,"end"),e._offDOMEvent(p,"blur","end"),a("body").css("user-select",""),delete e._startPos,delete e._oldPos,delete e._wrapperSize,delete e._boundary,delete e._isFixedPosition,e._trigger("dragend",{sourceEvent:t,wrapper:e._wrapper}))},_destroy:function(){this.end()}})});