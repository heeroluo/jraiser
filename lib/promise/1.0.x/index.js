/*!
 * JRaiser 2 Javascript Library
 * promise@1.0.0 (2016-06-21T15:15:46+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("promise/1.0.x/",["base/1.1.x/base"],function(n,t,e){"use strict";function c(n){return n&&"function"==typeof n.then}function i(n,t,e){c(n)?n.then(t,e):t(n)}var r=n("base@1.1.x"),u=window.console,o=u&&"function"==typeof u.error?function(n){u.error("Uncaught (in promise) %o",n)}:function(){},a=0,s=1,f=2,l=3,_=r.createClass(function(n){function t(n){e._settle(f,n)}if("function"!=typeof n)throw new Error("Promise executor must be a function");var e=this;e._status=a,e._pendings={};try{n(function(n){i(n,function(n){e._settle(s,n)},t)},t,function(n){if("function"!=typeof n)throw new Error("Promise canceler must be a function");e._canceler=n})}catch(c){t(c)}},{_settle:function(n,t){var e=this;if(e._status===a){e._status=n,e._value=t,e._status===f&&setTimeout(function(){e._hasRejectedHandler||o(t)},0);var c=e._pendings[n];c&&c.forEach(function(n){n(t)}),delete e._pendings}},_listen:function(n,t){var e=this;switch(n===f&&(e._hasRejectedHandler=!0),e._status){case a:e._pendings[n]=e._pendings[n]||[],e._pendings[n].push(t);break;case n:t(e._value)}},cancel:function(){var n=this;if(n._status===a){if(!n._canceler)throw new Error("Promise canceler is undefined");n._canceler.call(window),n._settle(l)}},_then:function(n,t,e){var c=this;return new _(function(r,u,o){c._listen(s,function(){var t=c._value;if(n)try{t=e?n.apply(window,t):n.call(window,t)}catch(o){return void u(o)}i(t,r,u)}),c._listen(f,function(){var n=c._value;if(t){try{n=t.call(window,n)}catch(e){return void u(e)}i(n,r,u)}else u(n)}),c._canceler&&o(function(){c.cancel()})})},then:function(n,t){return this._then(n,t)},spread:function(n){return this._then(n,null,!0)},"catch":function(n){return this.then(null,n)},"finally":function(n){var t=this;return new _(function(e,c,i){function r(){var i,r={code:t._status,FULFILLED:s,REJECTED:f,CANCELED:l},u=t._value;switch(t._status){case s:r.value=u,i=function(){e(u)};break;case f:r.reason=u,i=function(){c(u)}}if(n)try{n.call(window,r)}catch(o){return void c(o)}i&&i()}t._canceler&&i(function(){t.cancel()}),t._listen(s,r),t._listen(f,r),t._listen(l,r)})}});return r.extend(_,{all:function(n){var t=n.length;return t?new _(function(e,c){var i=new Array(t);n.forEach(function(n,r){n.then(function(n){i[r]=n,--t||e(i)},c)})}):_.resolve([])},race:function(n){return new _(function(t,e){n.forEach(function(n,c){n.then(t,e)})})},resolve:function(n){return new _(function(t,e){setTimeout(function(){i(n,t,e)},0)})},reject:function(n){return new _(function(t,e){setTimeout(function(){e(n)},0)})}}),_});