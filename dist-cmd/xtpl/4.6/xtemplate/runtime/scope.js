define("xtpl/4.6/xtemplate/runtime/scope",null,function(e,t,n){"use strict";function r(e,t,n){e!==undefined?this.data=e:this.data={},n?(this.parent=n,this.root=n.root):(this.parent=undefined,this.root=this),this.affix=t||{},this.ready=!1}r.prototype={isScope:1,constructor:r,setParent:function(e){this.parent=e,this.root=e.root},set:function(e,t){this.affix[e]=t},setData:function(e){this.data=e},getData:function(){return this.data},mix:function(e){var t=this.affix;for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},get:function(e){var t=this.data,n=void 0,r=this.affix;return null!==t&&t!==undefined&&(n=t[e]),n!==undefined?n:r[e]},resolveInternalOuter:function(e){var t=e[0],n=void 0,r=this;if("this"===t)n=this.data;else if("root"===t)n=(r=r.root).data;else{if(!t)return[r.data];for(;(n=r.get(t))===undefined&&(r=r.parent););}return[undefined,n]},resolveInternal:function(e){var t=this.resolveInternalOuter(e);if(1===t.length)return t[0];var n=void 0,r=e.length,i=t[1];if(i===undefined)return undefined;for(n=1;n<r;n++){if(null===i||i===undefined)return i;i=i[e[n]]}return i},resolveLooseInternal:function(e){var t=this.resolveInternalOuter(e);if(1===t.length)return t[0];var n=void 0,r=e.length,i=t[1];for(n=1;null!==i&&i!==undefined&&n<r;n++)i=i[e[n]];return i},resolveUp:function(e){return this.parent&&this.parent.resolveInternal(e)},resolveLooseUp:function(e){return this.parent&&this.parent.resolveLooseInternal(e)},resolveOuter:function(e,t){var n=this,r=t,i=void 0;if(!r&&1===e.length){if((i=this.get(e[0]))!==undefined)return[i];r=1}if(r)for(;n&&r--;)n=n.parent;return n?[undefined,n]:[undefined]},resolveLoose:function(e,t){var n=this.resolveOuter(e,t);return 1===n.length?n[0]:n[1].resolveLooseInternal(e)},resolve:function(e,t){var n=this.resolveOuter(e,t);return 1===n.length?n[0]:n[1].resolveInternal(e)}},n.exports=r});