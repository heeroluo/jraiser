define("dom/1.2/dom-data",["base/1.2/base","dom/1.2/dom-base"],function(e,n,t){"use strict";var r,a=e("../../base/1.2/base"),f=e("./dom-base"),o=function(){var n={OBJECT:!0,EMBED:!0,APPLET:!0},a="_jraiser_nodeid_"+ +new Date+"_",i=0,o={};function c(e){return f.isWindow(e)||!f.isNode(e)?2:null==e||1!==e.nodeType&&9!==e.nodeType?0:f.isXMLNode(e)||n[e.nodeName]?2:1}var s={};return{get:function(e,n){var t;switch(c(e)){case 1:(t=e[a])||n||(t=e[a]=new Number(++i),s[t]=function(){e[a]});break;case 2:for(var r in o)if(o[r]===e){t=r;break}t||n||(t=++i,o[t]=e)}if(t)return t.valueOf()},remove:function(e){switch(c(e)){case 1:!function t(e){if(e[a]){delete s[e[a]];try{delete e[a]}catch(n){e[a]=null}}}(e);break;case 2:for(var n in o)if(o[n]===e){delete o[n];break}}}}}(),i=a.createClass(function(e){this._space={},this._cloneable=!1!==e.cloneable,this._onClone=e.onClone},{_findData:function(e){return this._space[o.get(e,!0)]},keys:function(e){var n=this._findData(e),t=[];if(n)for(var r in n)n.hasOwnProperty(r)&&t.push(r);return t},get:function(e,n){var t=this._findData(e);if(t&&t.hasOwnProperty(n))return t[n]},set:function(e,n,t){var r=o.get(e);if(r){var a=this._space;a[r]||(a[r]={}),a[r][n]=t}},remove:function(e,n){var t=this._findData(e);t&&(delete t[n],a.isEmptyObject(t)&&this.clear(e))},clear:function(e){delete this._space[o.get(e,!0)]},clone:function(e,n){if(this._cloneable){var t=this._findData(n);if(t){var r=o.get(e),a=this._space[r]=this._space[r]||{};for(var i in t)t.hasOwnProperty(i)&&(a[i]=t[i]);this._onClone&&this._onClone(e,n)}}}}),c=(r=[],{add:function(e){return r.push(e)-1},clear:function(e){for(var n=r.length-1;0<=n;n--)r[n].clear(e)},clone:function(e,n){for(var t=r.length-1;0<=t;t--)r[t].clone(e,n)}}),s=n.createDataSpace=function(e){var n=new i(e||{});return c.add(n),n};n.clearAll=function(e){c.clear(e),o.remove(e)},n.cloneAll=function(e,n){c.clone(e,n)},n.removeUniqueId=function(e){o.remove(e)};var u=s();function l(e,n){return u.get(e,n)}function h(e,n,t){u.set(e,n,t)}n.shortcuts={data:function(e,n){return f.access(this,e,n,!0,{get:l,set:h})},removeData:function(n){return null!=n&&(n=f.splitBySpace(n)),this.forEach(function(e){!function t(n,e){null==e?u.clear(n):e.forEach(function(e){u.remove(n,e)})}(e,n)}),this}}});