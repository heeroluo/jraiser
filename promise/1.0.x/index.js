/*!
 * JRaiser 2 Javascript Library
 * promise - v1.0.0 (2016-04-26T10:56:30+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("promise/1.0.x/",["base/1.1.x/"],function(n,t,e){"use strict";function i(n){return n&&"function"==typeof n.then}function c(n,t,e){i(n)?n.then(t,e):t(n)}var r=n("base/1.1.x/"),u=window.console,o=u&&"function"==typeof u.error?function(n){u.error("Uncaught (in promise) "+n)}:function(){},s=0,a=1,f=2,l=3,_=r.createClass(function(n){function t(n){e._settle(f,n)}if("function"!=typeof n)throw new Error("Promise executor must be a function");var e=this;e._status=s,e._pendings={};try{n(function(n){c(n,function(n){e._settle(a,n)},t)},t,function(n){if("function"!=typeof n)throw new Error("Promise canceler must be a function");e._canceler=n})}catch(i){t(i)}},{_settle:function(n,t){var e=this;if(e._status===s){e._status=n,e._value=t,e._status===f&&setTimeout(function(){e._hasRejectedHandler||o(t)},0);var i=e._pendings[n];i&&i.forEach(function(n){n(t)}),delete e._pendings}},_listen:function(n,t){var e=this;switch(n===f&&(e._hasRejectedHandler=!0),e._status){case s:e._pendings[n]=e._pendings[n]||[],e._pendings[n].push(t);break;case n:t(e._value)}},cancel:function(){var n=this;if(n._status===s){if(!n._canceler)throw new Error("Promise canceler is undefined");n._canceler.call(window),n._settle(l)}},_then:function(n,t,e){var i=this;return new _(function(r,u,o){i._listen(a,function(){var t=i._value;if(n)try{t=e?n.apply(window,t):n.call(window,t)}catch(o){return void u(o)}c(t,r,u)}),i._listen(f,function(){var n=i._value;if(t){try{n=t.call(window,n)}catch(e){return void u(e)}c(n,r,u)}else u(n)}),i._canceler&&o(function(){i.cancel()})})},then:function(n,t){return this._then(n,t)},spread:function(n){return this._then(n,null,!0)},"catch":function(n){return this.then(null,n)},"finally":function(n){var t=this;return new _(function(e,i,c){function r(){if(n)try{n.call(window,t._status===l)}catch(c){return void i(c)}t._status===a?e(t._value):t._status===f&&i(t._value)}t._canceler&&c(function(){t.cancel()}),t._listen(a,r),t._listen(f,r),t._listen(l,r)})}});return r.extend(_,{all:function(n){var t=n.length;return t?new _(function(e,i){var c=new Array(t);n.forEach(function(n,r){n.then(function(n){c[r]=n,--t||e(c)},i)})}):_.resolve([])},race:function(n){return new _(function(t,e){n.forEach(function(n,i){n.then(t,e)})})},resolve:function(n){return new _(function(t,e){setTimeout(function(){c(n,t,e)},0)})},reject:function(n){return new _(function(t,e){setTimeout(function(){e(n)},0)})}}),_});