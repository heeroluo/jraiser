/*!
 * JRaiser 2 Javascript Library
 * promise - v1.0.0 (2016-04-25T17:42:15+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("promise/1.0.x/",["base/1.1.x/"],function(n,t,e){"use strict";function i(n){return n&&"function"==typeof n.then}var c=n("base/1.1.x/"),r="undefined"!=typeof console&&console.error?function(n){console.error("Uncaught (in promise) "+n)}:function(){},u=0,o=1,s=2,f=3,a=c.createClass(function(n){if("function"!=typeof n)throw new Error("Promise executor must be a function");var t=this;t._status=u,t._pendings={};try{n(function(n){t._settle(o,n)},function(n){t._settle(s,n)},function(n){if("function"!=typeof n)throw new Error("Promise canceler must be a function");t._canceler=n})}catch(e){t._settle(s,e)}},{_settle:function(n,t){var e=this;if(e._status===u){e._status=n,e._value=t;var i=e._pendings[n];e._status===s&&setTimeout(function(){i&&i.length||r(t)},0),i&&i.forEach(function(n){n(t)}),delete e._pendings}},_listen:function(n,t){var e=this;e._status===u?(e._pendings[n]=e._pendings[n]||[],e._pendings[n].push(t)):e._status===n&&t(e._value)},cancel:function(){var n=this;if(!n._canceler)throw new Error("Promise canceler is undefined");n._canceler.call(window),n._settle(f)},then:function(n,t){var e=this;return new a(function(c,r,u){e._listen(o,function(){var t=e._value;if(n)try{t=n(t)}catch(u){return void r(u)}i(t)?t.then(c,r):c(t)}),e._listen(s,function(){var n=e._value;if(t){try{n=t(n)}catch(u){return void r(u)}i(n)?n.then(c,r):c(n)}else r(n)}),e._canceler&&u(function(){e.cancel()})})},"catch":function(n){return this.then(null,n)},"finally":function(n){var t=this;return new a(function(e,i,c){function r(){if(n)try{n()}catch(c){return void i(c)}t._status===o?e(t._value):t._status===s&&i(t._value)}t._canceler&&c(function(){t.cancel()}),t._listen(o,r),t._listen(s,r),t._listen(f,r)})}});return c.extend(a,{all:function(n){var t=n.length;return t?new a(function(e,i){var c=new Array(t);n.forEach(function(n,r){n.then(function(n){c[r]=n,--t||e(c)},i)})}):a.resolve([])},race:function(n){return new a(function(t,e){n.forEach(function(n,i){n.then(t,e)})})},resolve:function(n){return new a(function(t,e){setTimeout(function(){i(n)?n.then(t,e):t(n)},0)})},reject:function(n){return new a(function(t,e){setTimeout(function(){e(n)},0)})}}),a});